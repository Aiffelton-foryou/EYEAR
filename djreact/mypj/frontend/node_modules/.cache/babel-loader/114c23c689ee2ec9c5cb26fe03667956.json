{"ast":null,"code":"var _jsxFileName = \"C:\\\\djreact\\\\mypj\\\\frontend\\\\src\\\\components\\\\camera-feed.jsx\";\nimport React, { Component } from 'react';\nimport './feed.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class CameraFeed extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.takePhoto = () => {\n      const {\n        sendFile\n      } = this.props;\n      const context = this.canvas.getContext('2d');\n      context.drawImage(this.videoPlayer, 0, 0, 680, 360);\n      this.canvas.toBlob(sendFile);\n    };\n  }\n\n  /**\r\n   * Processes available devices and identifies one by the label\r\n   * @memberof CameraFeed\r\n   * @instance\r\n   */\n  processDevices(devices) {\n    devices.forEach(device => {\n      console.log(device.label);\n      this.setDevice(device);\n    });\n  }\n  /**\r\n   * Sets the active device and starts playing the feed\r\n   * @memberof CameraFeed\r\n   * @instance\r\n   */\n\n\n  async setDevice(device) {\n    const {\n      deviceId\n    } = device;\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: false,\n      video: {\n        deviceId\n      }\n    });\n    this.videoPlayer.srcObject = stream;\n    this.videoPlayer.play();\n  }\n  /**\r\n   * On mount, grab the users connected devices and process them\r\n   * @memberof CameraFeed\r\n   * @instance\r\n   * @override\r\n   */\n\n\n  async componentDidMount() {\n    const cameras = await navigator.mediaDevices.enumerateDevices();\n    this.processDevices(cameras);\n  }\n  /**\r\n   * Handles taking a still image from the video feed on the camera\r\n   * @memberof CameraFeed\r\n   * @instance\r\n   */\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-camera-feed\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-camera-feed__viewer\",\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          ref: ref => this.videoPlayer = ref,\n          width: \"680\",\n          heigh: \"360\",\n          onMouseDown: this.takePhoto\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-camera-feed__stage\",\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          width: \"680\",\n          height: \"360\",\n          ref: ref => this.canvas = ref\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","Component","CameraFeed","takePhoto","sendFile","props","context","canvas","getContext","drawImage","videoPlayer","toBlob","processDevices","devices","forEach","device","console","log","label","setDevice","deviceId","stream","navigator","mediaDevices","getUserMedia","audio","video","srcObject","play","componentDidMount","cameras","enumerateDevices","render","ref"],"sources":["C:/djreact/mypj/frontend/src/components/camera-feed.jsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport './feed.css';\r\nexport class CameraFeed extends Component {\r\n    /**\r\n     * Processes available devices and identifies one by the label\r\n     * @memberof CameraFeed\r\n     * @instance\r\n     */\r\n    processDevices(devices) {\r\n        devices.forEach(device => {\r\n            console.log(device.label);\r\n            this.setDevice(device);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Sets the active device and starts playing the feed\r\n     * @memberof CameraFeed\r\n     * @instance\r\n     */\r\n    async setDevice(device) {\r\n        const { deviceId } = device;\r\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: false, video: { deviceId } });\r\n        this.videoPlayer.srcObject = stream;\r\n        this.videoPlayer.play();\r\n    }\r\n\r\n    /**\r\n     * On mount, grab the users connected devices and process them\r\n     * @memberof CameraFeed\r\n     * @instance\r\n     * @override\r\n     */\r\n    async componentDidMount() {\r\n        const cameras = await navigator.mediaDevices.enumerateDevices();\r\n        this.processDevices(cameras);\r\n    }\r\n\r\n    /**\r\n     * Handles taking a still image from the video feed on the camera\r\n     * @memberof CameraFeed\r\n     * @instance\r\n     */\r\n    takePhoto = () => {\r\n        const { sendFile } = this.props;\r\n        const context = this.canvas.getContext('2d');\r\n        context.drawImage(this.videoPlayer, 0, 0, 680, 360);\r\n        this.canvas.toBlob(sendFile);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"c-camera-feed\">\r\n                <div className=\"c-camera-feed__viewer\">\r\n                    <video ref={ref => (this.videoPlayer = ref)} width=\"680\" heigh=\"360\" onMouseDown={this.takePhoto}/>\r\n                </div>\r\n                {/* <button onClick={this.takePhoto}>Take photo!</button> */}\r\n                <div className=\"c-camera-feed__stage\">\r\n                    <canvas width=\"680\" height=\"360\" ref={ref => (this.canvas = ref)} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,YAAP;;AACA,OAAO,MAAMC,UAAN,SAAyBD,SAAzB,CAAmC;EAAA;IAAA;;IAAA,KAyCtCE,SAzCsC,GAyC1B,MAAM;MACd,MAAM;QAAEC;MAAF,IAAe,KAAKC,KAA1B;MACA,MAAMC,OAAO,GAAG,KAAKC,MAAL,CAAYC,UAAZ,CAAuB,IAAvB,CAAhB;MACAF,OAAO,CAACG,SAAR,CAAkB,KAAKC,WAAvB,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,GAA1C,EAA+C,GAA/C;MACA,KAAKH,MAAL,CAAYI,MAAZ,CAAmBP,QAAnB;IACH,CA9CqC;EAAA;;EACtC;AACJ;AACA;AACA;AACA;EACIQ,cAAc,CAACC,OAAD,EAAU;IACpBA,OAAO,CAACC,OAAR,CAAgBC,MAAM,IAAI;MACtBC,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,KAAnB;MACA,KAAKC,SAAL,CAAeJ,MAAf;IACH,CAHD;EAIH;EAED;AACJ;AACA;AACA;AACA;;;EACmB,MAATI,SAAS,CAACJ,MAAD,EAAS;IACpB,MAAM;MAAEK;IAAF,IAAeL,MAArB;IACA,MAAMM,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;MAAEC,KAAK,EAAE,KAAT;MAAgBC,KAAK,EAAE;QAAEN;MAAF;IAAvB,CAApC,CAArB;IACA,KAAKV,WAAL,CAAiBiB,SAAjB,GAA6BN,MAA7B;IACA,KAAKX,WAAL,CAAiBkB,IAAjB;EACH;EAED;AACJ;AACA;AACA;AACA;AACA;;;EAC2B,MAAjBC,iBAAiB,GAAG;IACtB,MAAMC,OAAO,GAAG,MAAMR,SAAS,CAACC,YAAV,CAAuBQ,gBAAvB,EAAtB;IACA,KAAKnB,cAAL,CAAoBkB,OAApB;EACH;EAED;AACJ;AACA;AACA;AACA;;;EAQIE,MAAM,GAAG;IACL,oBACI;MAAK,SAAS,EAAC,eAAf;MAAA,wBACI;QAAK,SAAS,EAAC,uBAAf;QAAA,uBACI;UAAO,GAAG,EAAEC,GAAG,IAAK,KAAKvB,WAAL,GAAmBuB,GAAvC;UAA6C,KAAK,EAAC,KAAnD;UAAyD,KAAK,EAAC,KAA/D;UAAqE,WAAW,EAAE,KAAK9B;QAAvF;UAAA;UAAA;UAAA;QAAA;MADJ;QAAA;QAAA;QAAA;MAAA,QADJ,eAKI;QAAK,SAAS,EAAC,sBAAf;QAAA,uBACI;UAAQ,KAAK,EAAC,KAAd;UAAoB,MAAM,EAAC,KAA3B;UAAiC,GAAG,EAAE8B,GAAG,IAAK,KAAK1B,MAAL,GAAc0B;QAA5D;UAAA;UAAA;UAAA;QAAA;MADJ;QAAA;QAAA;QAAA;MAAA,QALJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ;EAWH;;AA5DqC"},"metadata":{},"sourceType":"module"}