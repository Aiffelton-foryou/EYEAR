{"ast":null,"code":"'use strict';\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar _regeneratorRuntime = _interopDefault(require('@babel/runtime/regenerator'));\n\nvar _asyncToGenerator = _interopDefault(require('@babel/runtime/helpers/asyncToGenerator'));\n\nvar _classCallCheck = _interopDefault(require('@babel/runtime/helpers/classCallCheck'));\n\nvar _createClass = _interopDefault(require('@babel/runtime/helpers/createClass'));\n\nvar _possibleConstructorReturn = _interopDefault(require('@babel/runtime/helpers/possibleConstructorReturn'));\n\nvar _getPrototypeOf = _interopDefault(require('@babel/runtime/helpers/getPrototypeOf'));\n\nvar _assertThisInitialized = _interopDefault(require('@babel/runtime/helpers/assertThisInitialized'));\n\nvar _inherits = _interopDefault(require('@babel/runtime/helpers/inherits'));\n\nvar _defineProperty = _interopDefault(require('@babel/runtime/helpers/defineProperty'));\n\nvar React = require('react');\n\nvar React__default = _interopDefault(React);\n\nvar PropTypes = _interopDefault(require('prop-types'));\n\nvar debounce = _interopDefault(require('throttle-debounce/debounce'));\n\nif (navigator.mediaDevices === undefined) {\n  navigator.mediaDevices = {};\n} // Some browsers partially implement mediaDevices. We can't just assign an object\n// with getUserMedia as it would overwrite existing properties.\n// Here, we will just add the getUserMedia property if it's missing.\n\n\nif (navigator.mediaDevices.getUserMedia === undefined) {\n  navigator.mediaDevices.getUserMedia = function (constraints) {\n    // First get ahold of the legacy getUserMedia, if present\n    var getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia; // Some browsers just don't implement it - return a rejected promise with an error\n    // to keep a consistent interface\n\n    if (!getUserMedia) {\n      return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n    } // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n\n\n    return new Promise(function (resolve, reject) {\n      getUserMedia.call(navigator, constraints, resolve, reject);\n    });\n  };\n}\n\nvar errorTypes = {\n  INVALID_FACING_MODE: {\n    details: 'Facing mode not recognized',\n    type: 'INVALID_FACING_MODE'\n  },\n  NO_STREAM: {\n    details: 'Your browser does not support this feature',\n    type: 'NO_STREAM'\n  },\n  TAKE_PHOTO_FAILURE: {\n    details: 'Could not take a photo',\n    type: 'TAKE_PHOTO_FAILURE'\n  },\n  UNSUPPORTED: {\n    details: 'Your browser does not support this feature',\n    type: 'UNSUPPORTED'\n  }\n};\nvar wrapperStyles = {\n  padding: '30px 15px'\n};\nvar textStyles = {\n  fontSize: '16px',\n  margin: 0,\n  textAlign: 'center'\n};\n\nvar CameraError = function CameraError(_ref) {\n  var _ref$errorType = _ref.errorType,\n      errorType = _ref$errorType === void 0 ? '' : _ref$errorType;\n  return React__default.createElement(\"div\", {\n    style: wrapperStyles\n  }, React__default.createElement(\"p\", {\n    style: textStyles\n  }, errorTypes[errorType].details || 'Oops, something broke.'));\n};\n\nvar captureButtonStyle = {\n  background: 'white',\n  border: '6px solid white',\n  borderRadius: '50%',\n  boxShadow: '0 2px 7px rgba(0, 0, 0, 0.25), inset 0 0 0 2px rgba(0, 0, 0, 0.75)',\n  cursor: 'pointer',\n  height: '60px',\n  width: '60px'\n};\n\nvar CaptureButton = function CaptureButton(_ref) {\n  var onCapture = _ref.onCapture;\n  return React__default.createElement(\"button\", {\n    onClick: onCapture,\n    style: captureButtonStyle,\n    title: \"Take photo\",\n    type: \"button\"\n  });\n};\n\nCaptureButton.propTypes = {\n  onCapture: PropTypes.func.isRequired\n};\nvar wrapperStyle = {\n  position: 'relative'\n};\n\nvar CameraWrapper = function CameraWrapper(_ref) {\n  var children = _ref.children;\n  return React__default.createElement(\"div\", {\n    style: wrapperStyle\n  }, children);\n};\n\nvar cameraControlsStyle = {\n  alignItems: 'center',\n  bottom: '30px',\n  boxSizing: 'border-box',\n  display: 'flex',\n  justifyContent: 'center',\n  padding: '0 30px',\n  position: 'absolute',\n  width: '100%'\n};\n\nvar CameraControls = function CameraControls(_ref) {\n  var children = _ref.children;\n  return React__default.createElement(\"div\", {\n    style: cameraControlsStyle\n  }, children);\n};\n\nvar facingModes = {\n  ENVIRONMENT: 'ENVIRONMENT',\n  LEFT: 'LEFT',\n  RIGHT: 'RIGHT',\n  USER: 'USER'\n};\n\nvar SwitchIcon = function SwitchIcon() {\n  return React__default.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: \"2\"\n  }, React__default.createElement(\"g\", {\n    strokeWidth: \"2\",\n    transform: \"translate(0, 0)\"\n  }, React__default.createElement(\"polygon\", {\n    fill: \"none\",\n    stroke: \"#fff\",\n    strokeWidth: \"2\",\n    strokeLinecap: \"square\",\n    strokeMiterlimit: \"10\",\n    points: \"1,22 23,22 23,5 19,5 17,2 11,2 9,5 1,5 \",\n    strokeLinejoin: \"miter\"\n  }), ' ', React__default.createElement(\"circle\", {\n    fill: \"none\",\n    stroke: \"#fff\",\n    strokeWidth: \"2\",\n    strokeLinecap: \"square\",\n    strokeMiterlimit: \"10\",\n    cx: \"14\",\n    cy: \"13\",\n    r: \"5\",\n    strokeLinejoin: \"miter\"\n  }), ' ', React__default.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: \"5\",\n    cy: \"9\",\n    r: \"1\",\n    strokeLinejoin: \"miter\",\n    strokeLinecap: \"square\"\n  })));\n};\n\nvar switchButtonStyle = {\n  alignItems: 'center',\n  background: 'none',\n  border: 'none',\n  cursor: 'pointer',\n  display: 'flex',\n  height: '40px',\n  justifyContent: 'center',\n  position: 'absolute',\n  right: '5vw',\n  top: '5vh',\n  width: '40px'\n};\n\nvar SwitchModeButton = function SwitchModeButton(_ref) {\n  var _ref$currentFacingMod = _ref.currentFacingMode,\n      currentFacingMode = _ref$currentFacingMod === void 0 ? '' : _ref$currentFacingMod,\n      onSwitch = _ref.onSwitch;\n  return React__default.createElement(\"button\", {\n    onClick: function onClick() {\n      return onSwitch(currentFacingMode === facingModes.ENVIRONMENT ? facingModes.USER : facingModes.ENVIRONMENT);\n    },\n    style: switchButtonStyle,\n    type: \"button\"\n  }, React__default.createElement(SwitchIcon, null));\n};\n\nSwitchModeButton.propTypes = {\n  currentFacingMode: PropTypes.string.isRequired,\n  onSwitch: PropTypes.func.isRequired\n};\n/**\n * getAvailableDevices\n * Returns a list of available hardware audio and or video devices.\n *\n * @param {string} type Either 'video' or 'audio'. If not specified, all\n * devices will be returned.\n */\n\nvar getAvailableDevices = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var type,\n        devices,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            type = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n            _context.next = 3;\n            return navigator.mediaDevices.enumerateDevices();\n\n          case 3:\n            devices = _context.sent;\n\n            if (!(devices.length > 0)) {\n              _context.next = 11;\n              break;\n            }\n\n            if (type) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", devices);\n\n          case 7:\n            if (!(type === 'video')) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            }));\n\n          case 9:\n            if (!(type === 'audio')) {\n              _context.next = 11;\n              break;\n            }\n\n            return _context.abrupt(\"return\", devices.filter(function (d) {\n              return d.kind === 'audioinput';\n            }));\n\n          case 11:\n            return _context.abrupt(\"return\", null);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getAvailableDevices() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar buildConstraints = function buildConstraints(facingMode, height, width) {\n  var constraints = {\n    video: {}\n  };\n  if (facingMode) constraints.video.facingMode = facingMode.toLowerCase();\n  if (height) constraints.video.height = {\n    ideal: height\n  };\n  if (width) constraints.video.width = {\n    ideal: width\n  };\n  return constraints;\n};\n\nvar Camera = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Camera, _PureComponent);\n\n  function Camera(props) {\n    var _this;\n\n    _classCallCheck(this, Camera);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Camera).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"captureMediaStream\", function (event, mediaStream) {\n      var ms = mediaStream || _this.state.mediaStream;\n      if (!ms) _this.setState({\n        error: errorTypes.NO_STREAM.type\n      });\n      var mediaStreamTrack = ms.getVideoTracks()[0];\n      var imageCapture = new window.ImageCapture(mediaStreamTrack);\n\n      if (imageCapture) {\n        _this.takePhoto(imageCapture);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeFacingMode\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var facingMode,\n          _this$state$constrain,\n          height,\n          width,\n          constraints,\n          _args = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              facingMode = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n\n              if (facingModes[facingMode]) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\", _this.setState({\n                error: errorTypes.INVALID_FACING_MODE.type\n              }));\n\n            case 3:\n              _this.stopMediaStream();\n\n              _this$state$constrain = _this.state.constraints.video, height = _this$state$constrain.height, width = _this$state$constrain.width;\n              constraints = buildConstraints(facingMode, height, width);\n              _context.next = 8;\n              return _this.getMediaStream(constraints);\n\n            case 8:\n              _this.setVideoStream();\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleResize\", debounce(150, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _this$state$constrain2, facingMode, height, width;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$state$constrain2 = _this.state.constraints.video, facingMode = _this$state$constrain2.facingMode, height = _this$state$constrain2.height, width = _this$state$constrain2.width;\n              _context2.next = 3;\n              return _this.getMediaStream(buildConstraints(facingMode, height, width));\n\n            case 3:\n              _this.setVideoStream();\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))));\n\n    var _this$props = _this.props,\n        _facingMode = _this$props.facingMode,\n        _height = _this$props.height,\n        _width = _this$props.width;\n\n    var _constraints = buildConstraints(_facingMode, _height, _width);\n\n    _this.state = {\n      constraints: _constraints,\n      devices: null,\n      error: false,\n      isIntersecting: false,\n      mediaStream: null\n    };\n    return _this;\n  }\n\n  _createClass(Camera, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var devices;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return getAvailableDevices('video');\n\n              case 2:\n                devices = _context3.sent;\n\n                if (devices) {\n                  this.setState({\n                    devices: devices\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.getMediaStream(this.state.constraints);\n\n              case 2:\n                this.setVideoStream();\n                window.addEventListener('resize', this.handleResize);\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopMediaStream();\n      window.removeEventListener('resize', this.handleResize);\n    }\n  }, {\n    key: \"getMediaStream\",\n    value: function () {\n      var _getMediaStream = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var constraints,\n            mediaStream,\n            _args5 = arguments;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                constraints = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {};\n                _context5.prev = 1;\n                _context5.next = 4;\n                return navigator.mediaDevices.getUserMedia(constraints);\n\n              case 4:\n                mediaStream = _context5.sent;\n                this.setState({\n                  mediaStream: mediaStream\n                });\n                _context5.next = 12;\n                break;\n\n              case 8:\n                _context5.prev = 8;\n                _context5.t0 = _context5[\"catch\"](1);\n                console.log(_context5.t0);\n                this.setState({\n                  error: errorTypes.UNSUPPORTED.type\n                });\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 8]]);\n      }));\n\n      function getMediaStream() {\n        return _getMediaStream.apply(this, arguments);\n      }\n\n      return getMediaStream;\n    }()\n  }, {\n    key: \"takePhoto\",\n    value: function () {\n      var _takePhoto = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(imageCapture) {\n        var onTakePhoto, blob, capturedImg;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                onTakePhoto = this.props.onTakePhoto;\n                _context6.next = 4;\n                return imageCapture.takePhoto();\n\n              case 4:\n                blob = _context6.sent;\n                capturedImg = URL.createObjectURL(blob);\n\n                if (onTakePhoto) {\n                  onTakePhoto(capturedImg);\n                }\n\n                _context6.next = 12;\n                break;\n\n              case 9:\n                _context6.prev = 9;\n                _context6.t0 = _context6[\"catch\"](0);\n                this.setState({\n                  error: errorTypes.TAKE_PHOTO_FAILURE.type\n                });\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 9]]);\n      }));\n\n      function takePhoto(_x) {\n        return _takePhoto.apply(this, arguments);\n      }\n\n      return takePhoto;\n    }()\n  }, {\n    key: \"setVideoStream\",\n    value: function setVideoStream() {\n      var _this2 = this;\n\n      var mediaStream = this.state.mediaStream;\n\n      if (this.video) {\n        this.video.srcObject = mediaStream;\n\n        this.video.onloadedmetadata = function () {\n          return _this2.video.play();\n        };\n      }\n    }\n  }, {\n    key: \"stopMediaStream\",\n    value: function stopMediaStream() {\n      if (this.video && this.video.srcObject) {\n        var onStopMediaStream = this.props.onStopMediaStream;\n        this.video.srcObject.getTracks().forEach(function (t) {\n          return t.stop();\n        });\n\n        if (onStopMediaStream) {\n          onStopMediaStream();\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          captureButtonRenderer = _this$props2.captureButtonRenderer,\n          responsive = _this$props2.responsive;\n      var _this$state = this.state,\n          _this$state$constrain3 = _this$state.constraints,\n          constraints = _this$state$constrain3 === void 0 ? {} : _this$state$constrain3,\n          devices = _this$state.devices,\n          error = _this$state.error;\n      var multipleDevices = devices && devices.length > 1;\n      var facingMode = constraints.video.facingMode;\n\n      if (error) {\n        return React__default.createElement(CameraError, {\n          errorType: error\n        });\n      }\n\n      return React__default.createElement(CameraWrapper, null, React__default.createElement(\"video\", {\n        autoPlay: true,\n        playsInline: true,\n        ref: function ref(video) {\n          return _this3.video = video;\n        },\n        style: responsive ? {\n          background: 'black',\n          display: 'block',\n          width: '100%'\n        } : {\n          background: 'black',\n          display: 'block'\n        }\n      }), React__default.createElement(CameraControls, null, captureButtonRenderer ? captureButtonRenderer(this.captureMediaStream) : React__default.createElement(CaptureButton, {\n        onCapture: this.captureMediaStream\n      })), multipleDevices && React__default.createElement(SwitchModeButton, {\n        currentFacingMode: facingMode,\n        onSwitch: this.changeFacingMode\n      }));\n    }\n  }]);\n\n  return Camera;\n}(React.PureComponent);\n\nCamera.defaultProps = {\n  facingMode: facingModes.ENVIRONMENT,\n  responsive: true\n};\nCamera.propTypes = {\n  captureButtonRenderer: PropTypes.func,\n  facingMode: PropTypes.string,\n  height: PropTypes.number,\n  onStopMediaStream: PropTypes.func,\n  onTakePhoto: PropTypes.func,\n  responsive: PropTypes.bool,\n  width: PropTypes.number\n};\nmodule.exports = Camera;","map":{"version":3,"names":["_interopDefault","ex","_regeneratorRuntime","require","_asyncToGenerator","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_assertThisInitialized","_inherits","_defineProperty","React","React__default","PropTypes","debounce","navigator","mediaDevices","undefined","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","Promise","reject","Error","resolve","call","errorTypes","INVALID_FACING_MODE","details","type","NO_STREAM","TAKE_PHOTO_FAILURE","UNSUPPORTED","wrapperStyles","padding","textStyles","fontSize","margin","textAlign","CameraError","_ref","_ref$errorType","errorType","createElement","style","captureButtonStyle","background","border","borderRadius","boxShadow","cursor","height","width","CaptureButton","onCapture","onClick","title","propTypes","func","isRequired","wrapperStyle","position","CameraWrapper","children","cameraControlsStyle","alignItems","bottom","boxSizing","display","justifyContent","CameraControls","facingModes","ENVIRONMENT","LEFT","RIGHT","USER","SwitchIcon","xmlns","x","y","viewBox","strokeWidth","transform","fill","stroke","strokeLinecap","strokeMiterlimit","points","strokeLinejoin","cx","cy","r","switchButtonStyle","right","top","SwitchModeButton","_ref$currentFacingMod","currentFacingMode","onSwitch","string","getAvailableDevices","mark","_callee","devices","_args","arguments","wrap","_callee$","_context","prev","next","length","enumerateDevices","sent","abrupt","filter","d","kind","stop","apply","buildConstraints","facingMode","video","toLowerCase","ideal","Camera","_PureComponent","props","_this","event","mediaStream","ms","state","setState","error","mediaStreamTrack","getVideoTracks","imageCapture","window","ImageCapture","takePhoto","_this$state$constrain","stopMediaStream","getMediaStream","setVideoStream","_callee2","_this$state$constrain2","_callee2$","_context2","_this$props","_facingMode","_height","_width","_constraints","isIntersecting","key","value","_componentWillMount","_callee3","_callee3$","_context3","componentWillMount","_componentDidMount","_callee4","_callee4$","_context4","addEventListener","handleResize","componentDidMount","componentWillUnmount","removeEventListener","_getMediaStream","_callee5","_args5","_callee5$","_context5","t0","console","log","_takePhoto","_callee6","onTakePhoto","blob","capturedImg","_callee6$","_context6","URL","createObjectURL","_x","_this2","srcObject","onloadedmetadata","play","onStopMediaStream","getTracks","forEach","t","render","_this3","_this$props2","captureButtonRenderer","responsive","_this$state","_this$state$constrain3","multipleDevices","autoPlay","playsInline","ref","captureMediaStream","changeFacingMode","PureComponent","defaultProps","number","bool","module","exports"],"sources":["C:/djreact/mypj/frontend/node_modules/react-dom-camera/lib/react-camera.js"],"sourcesContent":["'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar _regeneratorRuntime = _interopDefault(require('@babel/runtime/regenerator'));\nvar _asyncToGenerator = _interopDefault(require('@babel/runtime/helpers/asyncToGenerator'));\nvar _classCallCheck = _interopDefault(require('@babel/runtime/helpers/classCallCheck'));\nvar _createClass = _interopDefault(require('@babel/runtime/helpers/createClass'));\nvar _possibleConstructorReturn = _interopDefault(require('@babel/runtime/helpers/possibleConstructorReturn'));\nvar _getPrototypeOf = _interopDefault(require('@babel/runtime/helpers/getPrototypeOf'));\nvar _assertThisInitialized = _interopDefault(require('@babel/runtime/helpers/assertThisInitialized'));\nvar _inherits = _interopDefault(require('@babel/runtime/helpers/inherits'));\nvar _defineProperty = _interopDefault(require('@babel/runtime/helpers/defineProperty'));\nvar React = require('react');\nvar React__default = _interopDefault(React);\nvar PropTypes = _interopDefault(require('prop-types'));\nvar debounce = _interopDefault(require('throttle-debounce/debounce'));\n\nif (navigator.mediaDevices === undefined) {\n  navigator.mediaDevices = {};\n} // Some browsers partially implement mediaDevices. We can't just assign an object\n// with getUserMedia as it would overwrite existing properties.\n// Here, we will just add the getUserMedia property if it's missing.\n\n\nif (navigator.mediaDevices.getUserMedia === undefined) {\n  navigator.mediaDevices.getUserMedia = function (constraints) {\n    // First get ahold of the legacy getUserMedia, if present\n    var getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia; // Some browsers just don't implement it - return a rejected promise with an error\n    // to keep a consistent interface\n\n    if (!getUserMedia) {\n      return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n    } // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n\n\n    return new Promise(function (resolve, reject) {\n      getUserMedia.call(navigator, constraints, resolve, reject);\n    });\n  };\n}\n\nvar errorTypes = {\n  INVALID_FACING_MODE: {\n    details: 'Facing mode not recognized',\n    type: 'INVALID_FACING_MODE'\n  },\n  NO_STREAM: {\n    details: 'Your browser does not support this feature',\n    type: 'NO_STREAM'\n  },\n  TAKE_PHOTO_FAILURE: {\n    details: 'Could not take a photo',\n    type: 'TAKE_PHOTO_FAILURE'\n  },\n  UNSUPPORTED: {\n    details: 'Your browser does not support this feature',\n    type: 'UNSUPPORTED'\n  }\n};\n\nvar wrapperStyles = {\n  padding: '30px 15px'\n};\nvar textStyles = {\n  fontSize: '16px',\n  margin: 0,\n  textAlign: 'center'\n};\n\nvar CameraError = function CameraError(_ref) {\n  var _ref$errorType = _ref.errorType,\n      errorType = _ref$errorType === void 0 ? '' : _ref$errorType;\n  return React__default.createElement(\"div\", {\n    style: wrapperStyles\n  }, React__default.createElement(\"p\", {\n    style: textStyles\n  }, errorTypes[errorType].details || 'Oops, something broke.'));\n};\n\nvar captureButtonStyle = {\n  background: 'white',\n  border: '6px solid white',\n  borderRadius: '50%',\n  boxShadow: '0 2px 7px rgba(0, 0, 0, 0.25), inset 0 0 0 2px rgba(0, 0, 0, 0.75)',\n  cursor: 'pointer',\n  height: '60px',\n  width: '60px'\n};\n\nvar CaptureButton = function CaptureButton(_ref) {\n  var onCapture = _ref.onCapture;\n  return React__default.createElement(\"button\", {\n    onClick: onCapture,\n    style: captureButtonStyle,\n    title: \"Take photo\",\n    type: \"button\"\n  });\n};\n\nCaptureButton.propTypes = {\n  onCapture: PropTypes.func.isRequired\n};\n\nvar wrapperStyle = {\n  position: 'relative'\n};\n\nvar CameraWrapper = function CameraWrapper(_ref) {\n  var children = _ref.children;\n  return React__default.createElement(\"div\", {\n    style: wrapperStyle\n  }, children);\n};\n\nvar cameraControlsStyle = {\n  alignItems: 'center',\n  bottom: '30px',\n  boxSizing: 'border-box',\n  display: 'flex',\n  justifyContent: 'center',\n  padding: '0 30px',\n  position: 'absolute',\n  width: '100%'\n};\n\nvar CameraControls = function CameraControls(_ref) {\n  var children = _ref.children;\n  return React__default.createElement(\"div\", {\n    style: cameraControlsStyle\n  }, children);\n};\n\nvar facingModes = {\n  ENVIRONMENT: 'ENVIRONMENT',\n  LEFT: 'LEFT',\n  RIGHT: 'RIGHT',\n  USER: 'USER'\n};\n\nvar SwitchIcon = function SwitchIcon() {\n  return React__default.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: \"2\"\n  }, React__default.createElement(\"g\", {\n    strokeWidth: \"2\",\n    transform: \"translate(0, 0)\"\n  }, React__default.createElement(\"polygon\", {\n    fill: \"none\",\n    stroke: \"#fff\",\n    strokeWidth: \"2\",\n    strokeLinecap: \"square\",\n    strokeMiterlimit: \"10\",\n    points: \"1,22 23,22 23,5 19,5 17,2 11,2 9,5 1,5 \",\n    strokeLinejoin: \"miter\"\n  }), ' ', React__default.createElement(\"circle\", {\n    fill: \"none\",\n    stroke: \"#fff\",\n    strokeWidth: \"2\",\n    strokeLinecap: \"square\",\n    strokeMiterlimit: \"10\",\n    cx: \"14\",\n    cy: \"13\",\n    r: \"5\",\n    strokeLinejoin: \"miter\"\n  }), ' ', React__default.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: \"5\",\n    cy: \"9\",\n    r: \"1\",\n    strokeLinejoin: \"miter\",\n    strokeLinecap: \"square\"\n  })));\n};\n\nvar switchButtonStyle = {\n  alignItems: 'center',\n  background: 'none',\n  border: 'none',\n  cursor: 'pointer',\n  display: 'flex',\n  height: '40px',\n  justifyContent: 'center',\n  position: 'absolute',\n  right: '5vw',\n  top: '5vh',\n  width: '40px'\n};\n\nvar SwitchModeButton = function SwitchModeButton(_ref) {\n  var _ref$currentFacingMod = _ref.currentFacingMode,\n      currentFacingMode = _ref$currentFacingMod === void 0 ? '' : _ref$currentFacingMod,\n      onSwitch = _ref.onSwitch;\n  return React__default.createElement(\"button\", {\n    onClick: function onClick() {\n      return onSwitch(currentFacingMode === facingModes.ENVIRONMENT ? facingModes.USER : facingModes.ENVIRONMENT);\n    },\n    style: switchButtonStyle,\n    type: \"button\"\n  }, React__default.createElement(SwitchIcon, null));\n};\n\nSwitchModeButton.propTypes = {\n  currentFacingMode: PropTypes.string.isRequired,\n  onSwitch: PropTypes.func.isRequired\n};\n\n/**\n * getAvailableDevices\n * Returns a list of available hardware audio and or video devices.\n *\n * @param {string} type Either 'video' or 'audio'. If not specified, all\n * devices will be returned.\n */\nvar getAvailableDevices =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var type,\n        devices,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            type = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n            _context.next = 3;\n            return navigator.mediaDevices.enumerateDevices();\n\n          case 3:\n            devices = _context.sent;\n\n            if (!(devices.length > 0)) {\n              _context.next = 11;\n              break;\n            }\n\n            if (type) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", devices);\n\n          case 7:\n            if (!(type === 'video')) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            }));\n\n          case 9:\n            if (!(type === 'audio')) {\n              _context.next = 11;\n              break;\n            }\n\n            return _context.abrupt(\"return\", devices.filter(function (d) {\n              return d.kind === 'audioinput';\n            }));\n\n          case 11:\n            return _context.abrupt(\"return\", null);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getAvailableDevices() {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar buildConstraints = function buildConstraints(facingMode, height, width) {\n  var constraints = {\n    video: {}\n  };\n  if (facingMode) constraints.video.facingMode = facingMode.toLowerCase();\n  if (height) constraints.video.height = {\n    ideal: height\n  };\n  if (width) constraints.video.width = {\n    ideal: width\n  };\n  return constraints;\n};\n\nvar Camera =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(Camera, _PureComponent);\n\n  function Camera(props) {\n    var _this;\n\n    _classCallCheck(this, Camera);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Camera).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"captureMediaStream\", function (event, mediaStream) {\n      var ms = mediaStream || _this.state.mediaStream;\n      if (!ms) _this.setState({\n        error: errorTypes.NO_STREAM.type\n      });\n      var mediaStreamTrack = ms.getVideoTracks()[0];\n      var imageCapture = new window.ImageCapture(mediaStreamTrack);\n\n      if (imageCapture) {\n        _this.takePhoto(imageCapture);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeFacingMode\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var facingMode,\n          _this$state$constrain,\n          height,\n          width,\n          constraints,\n          _args = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              facingMode = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n\n              if (facingModes[facingMode]) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\", _this.setState({\n                error: errorTypes.INVALID_FACING_MODE.type\n              }));\n\n            case 3:\n              _this.stopMediaStream();\n\n              _this$state$constrain = _this.state.constraints.video, height = _this$state$constrain.height, width = _this$state$constrain.width;\n              constraints = buildConstraints(facingMode, height, width);\n              _context.next = 8;\n              return _this.getMediaStream(constraints);\n\n            case 8:\n              _this.setVideoStream();\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleResize\", debounce(150,\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var _this$state$constrain2, facingMode, height, width;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$state$constrain2 = _this.state.constraints.video, facingMode = _this$state$constrain2.facingMode, height = _this$state$constrain2.height, width = _this$state$constrain2.width;\n              _context2.next = 3;\n              return _this.getMediaStream(buildConstraints(facingMode, height, width));\n\n            case 3:\n              _this.setVideoStream();\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))));\n\n    var _this$props = _this.props,\n        _facingMode = _this$props.facingMode,\n        _height = _this$props.height,\n        _width = _this$props.width;\n\n    var _constraints = buildConstraints(_facingMode, _height, _width);\n\n    _this.state = {\n      constraints: _constraints,\n      devices: null,\n      error: false,\n      isIntersecting: false,\n      mediaStream: null\n    };\n    return _this;\n  }\n\n  _createClass(Camera, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var devices;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return getAvailableDevices('video');\n\n              case 2:\n                devices = _context3.sent;\n\n                if (devices) {\n                  this.setState({\n                    devices: devices\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.getMediaStream(this.state.constraints);\n\n              case 2:\n                this.setVideoStream();\n                window.addEventListener('resize', this.handleResize);\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopMediaStream();\n      window.removeEventListener('resize', this.handleResize);\n    }\n  }, {\n    key: \"getMediaStream\",\n    value: function () {\n      var _getMediaStream = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        var constraints,\n            mediaStream,\n            _args5 = arguments;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                constraints = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {};\n                _context5.prev = 1;\n                _context5.next = 4;\n                return navigator.mediaDevices.getUserMedia(constraints);\n\n              case 4:\n                mediaStream = _context5.sent;\n                this.setState({\n                  mediaStream: mediaStream\n                });\n                _context5.next = 12;\n                break;\n\n              case 8:\n                _context5.prev = 8;\n                _context5.t0 = _context5[\"catch\"](1);\n                console.log(_context5.t0);\n                this.setState({\n                  error: errorTypes.UNSUPPORTED.type\n                });\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 8]]);\n      }));\n\n      function getMediaStream() {\n        return _getMediaStream.apply(this, arguments);\n      }\n\n      return getMediaStream;\n    }()\n  }, {\n    key: \"takePhoto\",\n    value: function () {\n      var _takePhoto = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(imageCapture) {\n        var onTakePhoto, blob, capturedImg;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                onTakePhoto = this.props.onTakePhoto;\n                _context6.next = 4;\n                return imageCapture.takePhoto();\n\n              case 4:\n                blob = _context6.sent;\n                capturedImg = URL.createObjectURL(blob);\n\n                if (onTakePhoto) {\n                  onTakePhoto(capturedImg);\n                }\n\n                _context6.next = 12;\n                break;\n\n              case 9:\n                _context6.prev = 9;\n                _context6.t0 = _context6[\"catch\"](0);\n                this.setState({\n                  error: errorTypes.TAKE_PHOTO_FAILURE.type\n                });\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 9]]);\n      }));\n\n      function takePhoto(_x) {\n        return _takePhoto.apply(this, arguments);\n      }\n\n      return takePhoto;\n    }()\n  }, {\n    key: \"setVideoStream\",\n    value: function setVideoStream() {\n      var _this2 = this;\n\n      var mediaStream = this.state.mediaStream;\n\n      if (this.video) {\n        this.video.srcObject = mediaStream;\n\n        this.video.onloadedmetadata = function () {\n          return _this2.video.play();\n        };\n      }\n    }\n  }, {\n    key: \"stopMediaStream\",\n    value: function stopMediaStream() {\n      if (this.video && this.video.srcObject) {\n        var onStopMediaStream = this.props.onStopMediaStream;\n        this.video.srcObject.getTracks().forEach(function (t) {\n          return t.stop();\n        });\n\n        if (onStopMediaStream) {\n          onStopMediaStream();\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          captureButtonRenderer = _this$props2.captureButtonRenderer,\n          responsive = _this$props2.responsive;\n      var _this$state = this.state,\n          _this$state$constrain3 = _this$state.constraints,\n          constraints = _this$state$constrain3 === void 0 ? {} : _this$state$constrain3,\n          devices = _this$state.devices,\n          error = _this$state.error;\n      var multipleDevices = devices && devices.length > 1;\n      var facingMode = constraints.video.facingMode;\n\n      if (error) {\n        return React__default.createElement(CameraError, {\n          errorType: error\n        });\n      }\n\n      return React__default.createElement(CameraWrapper, null, React__default.createElement(\"video\", {\n        autoPlay: true,\n        playsInline: true,\n        ref: function ref(video) {\n          return _this3.video = video;\n        },\n        style: responsive ? {\n          background: 'black',\n          display: 'block',\n          width: '100%'\n        } : {\n          background: 'black',\n          display: 'block'\n        }\n      }), React__default.createElement(CameraControls, null, captureButtonRenderer ? captureButtonRenderer(this.captureMediaStream) : React__default.createElement(CaptureButton, {\n        onCapture: this.captureMediaStream\n      })), multipleDevices && React__default.createElement(SwitchModeButton, {\n        currentFacingMode: facingMode,\n        onSwitch: this.changeFacingMode\n      }));\n    }\n  }]);\n\n  return Camera;\n}(React.PureComponent);\n\nCamera.defaultProps = {\n  facingMode: facingModes.ENVIRONMENT,\n  responsive: true\n};\nCamera.propTypes = {\n  captureButtonRenderer: PropTypes.func,\n  facingMode: PropTypes.string,\n  height: PropTypes.number,\n  onStopMediaStream: PropTypes.func,\n  onTakePhoto: PropTypes.func,\n  responsive: PropTypes.bool,\n  width: PropTypes.number\n};\n\nmodule.exports = Camera;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}